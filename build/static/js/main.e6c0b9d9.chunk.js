(this["webpackJsonpbakers-math"]=this["webpackJsonpbakers-math"]||[]).push([[0],{29:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(23),i=n.n(a),s=(n(29),n(3)),o=n(21),u=n(13),l=n(2),d=n(5),j=n(0);var p=function(e){return Object(j.jsxs)("header",{className:"recipe-header",children:[Object(j.jsxs)("div",{className:"recipe-container",children:[Object(j.jsx)("legend",{className:"recipe-container__legend",children:"Name"}),Object(j.jsx)("input",{className:"recipe__input_heading",type:"text",placeholder:"Recipe Name",value:e.recipe.recipe_name,name:"recipe_name",onChange:function(t){return e.handleChangeRecipe(t)}})]}),Object(j.jsxs)("div",{className:"recipe-container",children:[Object(j.jsx)("legend",{className:"recipe-container__legend",children:"Total Flour (g)"}),Object(j.jsx)("input",{className:"recipe__input_heading",type:"number",placeholder:"0",value:e.recipe.flour_total,name:"flour_total",onChange:function(t){return e.handleChangeRecipe(t)}})]})]})};var b=function(e){return Object(j.jsx)("div",{className:"recipe-ingredient-name-container",children:Object(j.jsx)("input",{className:"recipe-ingredient__input recipe-ingredient__input_name",type:"text",placeholder:"Ingredient",name:e.inputName,value:e.ingredientTextValue,onChange:function(t){return e.handleChangeIngredient(t)}})})};var f=function(e){return Object(j.jsxs)("div",{className:"recipe__input-percent-container",children:[Object(j.jsx)("input",{className:"recipe-ingredient__input_percent",type:"number",name:e.inputName,value:e.ingredientPercentValue,onChange:function(t){return e.handleChangeIngredient(t)}}),Object(j.jsx)("p",{className:"recipe__input_percent-text",children:"%"})]})};var h=function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"recipe-ingredient-container",children:[Object(j.jsx)(b,{inputName:"name-".concat(e.id),ingredientTextValue:e.ingredientTextValue,handleChangeIngredient:function(t){return e.handleChangeIngredient(t)}}),Object(j.jsxs)("div",{className:"recipe-ingredient-percent-wt-btn-container",children:[Object(j.jsx)(f,{inputName:"percent-".concat(e.id),ingredientPercentValue:e.ingredientPercentValue,handleChangeIngredient:function(t){return e.handleChangeIngredient(t)}}),Object(j.jsx)("div",{className:"recipe-ingredient-container__calc-weight-div",children:function(){var t=e.flourTotal*(e.ingredientPercentValue/100);return t=isNaN(t)||!isFinite(t)?"":t.toFixed(1),Object(j.jsxs)("p",{className:"recipe-ingredient-container__calc-weight-value",children:[t," g"]})}()}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(t){return e.handleSubtractClick(t)},className:"recipe__button_delete",children:"-"})})]})]})})};var O=function(e){var t;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("section",{className:"recipe-section",children:[Object(j.jsxs)("div",{className:"recipe-banner",children:[Object(j.jsx)("p",{className:"recipe-banner__text",children:e.sectionName}),Object(j.jsx)("button",{className:"recipe-button_add",onClick:function(t){return e.handleClickAddIngredient(t,e.ingredientType)},children:"+"})]}),(t=e.ingredients,t.map((function(t,n){var r=t.id;return Object(j.jsx)(h,{id:r,flourTotal:e.recipe.flour_total,ingredientCount:n,ingredientTextValue:t.name,ingredientPercentValue:t.percent,handleChangeIngredient:function(t){return e.handleChangeIngredient(t,e.ingredientType)},handleSubtractClick:function(t){return e.handleSubtractClick(t,r,e.ingredientType)}},r)})))]})})},g=n(6),m=n.n(g),v=n(11),x={API_ENDPOINT:"http://localhost:9000/api",HEADERS:{"Content-Type":"application/json",Authorization:"Bearer ".concat("1234")}};var _=function(e){var t=function(e,t,n){var c,a=Object(r.useState)({formData:null,isSaving:!1,saveSuccessful:!1,saveError:""}),i=Object(d.a)(a,2),s=i[0],o=i[1],u="".concat(x.API_ENDPOINT,"/").concat(t);return"new"===n?c="POST":(c="PATCH",u="".concat(u,"/").concat(n)),[s,Object(r.useCallback)(Object(v.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o((function(e){return Object(l.a)(Object(l.a)({},e),{},{isSaving:!0})})),t.prev=1,console.log(e,c),t.next=6,fetch(u,{method:c,body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat("1234"),"Content-Type":"application/json"}});case 6:(n=t.sent).ok?o((function(e){return Object(l.a)(Object(l.a)({},e),{},{isSaving:!1,saveSuccessful:!0,saveError:""})})):n.ok||o((function(e){return Object(l.a)(Object(l.a)({},e),{},{isSaving:!1,saveSuccessful:!1,saveError:"Failed to save."})})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{isSaving:!1,saveSuccessful:!1,saveError:"Failed to save."})}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),[e,c,u])]}(e.formData,e.endpointSuffix,e.rowId),n=Object(d.a)(t,2),c=n[0],a=n[1];console.log(c);var i=function(){a()};return Object(j.jsx)("section",{className:"save-button-section",children:Object(j.jsx)("button",{id:"button-save",className:"button save-button-section__button",type:"submit",value:"Save",onClick:function(e){e.preventDefault(),i()},children:"Save"})})};var N=function(e){var t=function(e,t){var n=Object(r.useState)({isDeleting:!1,isDeleteError:!1,deleteErrorMessage:"",recordDeleted:!1}),c=Object(d.a)(n,2),a=c[0],i=c[1];return[a,Object(r.useCallback)(Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i((function(e){return Object(l.a)(Object(l.a)({},e),{},{isDeleting:!0})})),n.prev=1,n.next=5,fetch("".concat(x.API_ENDPOINT,"/").concat(e,"/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat("1234"),"Content-Type":"application/json"}});case 5:n.sent.ok?i((function(e){return Object(l.a)(Object(l.a)({},e),{},{isDeleting:!1,isDeleteError:!1,deleteErrorMessage:"",recordDeleted:!0})})):i((function(e){return Object(l.a)(Object(l.a)({},e),{},{isDeleting:!1,isDeleteError:!0,deleteErrorMessage:"Failed to delete record.",recordDeleted:!1})})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),i((function(e){return Object(l.a)(Object(l.a)({},e),{},{isDeleting:!1,isDeleteError:!0,deleteErrorMessage:"Unable to delete record.",recordDeleted:!1})}));case 12:case"end":return n.stop()}}),n,null,[[1,9]])}))),[e,t])]}(e.endpointSuffix,e.recipeId),n=Object(d.a)(t,2),c=n[0],a=n[1];console.log(c);var i=function(e){e.preventDefault(),a()};return Object(j.jsx)("section",{className:"delete-button-section",children:Object(j.jsx)("button",{id:"button-delete",className:"button delete-button-section__button",value:"delete",onClick:function(e){i(e)},children:"Delete"})})};var C=function(e){var t=Object(r.useState)({recipe_name:"",flour_total:""}),n=Object(d.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([{name:"",percent:"",id:""}]),b=Object(d.a)(i,2),f=b[0],h=b[1],g=Object(r.useState)([{name:"",percent:"",id:""}]),m=Object(d.a)(g,2),v=m[0],x=m[1],C=Object(s.f)().recipeId;Object(r.useEffect)((function(){if("new"!==C){var t=e.data[0],n=t.flours,r=t.ingredients;h(n),x(r),a({recipe_name:t.recipe_name,flour_total:t.flour_total})}else h([{name:"",percent:"",id:D()}]),x([{name:"",percent:"",id:D()}]),a({recipe_name:"",flour_total:""})}),[e.data,C]);var E=function(e,t){var n=e.target.name.split("-"),r=n[0],c=n[1];"flour"===t?I(e,r,c):"ingredient"===t&&S(e,r,c)},S=function(e,t,n){x(v.map((function(r){return r.id===n?Object(l.a)(Object(l.a)({},r),{},Object(u.a)({},t,e.target.value)):r})))},I=function(e,t,n){h(f.map((function(r){return r.id===n?Object(l.a)(Object(l.a)({},r),{},Object(u.a)({},t,e.target.value)):r})))},T=function(e,t,n){e.preventDefault(),"flour"===n?h(f.filter((function(e){return e.id!==t}))):"ingredient"===n&&x(v.filter((function(e){return e.id!==t})))},k=function(e,t){e.preventDefault(),"flour"===t?h([].concat(Object(o.a)(f),[{name:"",percent:"",id:D()}])):"ingredient"===t&&x([].concat(Object(o.a)(v),[{name:"",percent:"",id:D()}]))},D=function(){return Date.now().toString()},y=function(e){e.preventDefault()};return Object(j.jsxs)("form",{children:["new"!==e.recipeId?Object(j.jsx)(N,{handleDelete:y,endpointSuffix:"recipes",recipeId:C,redirectSuffix:"/"}):null,Object(j.jsx)(p,{recipe:c,handleChangeRecipe:function(e){return function(e){a(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},e.target.name,e.target.value)))}(e)}}),Object(j.jsx)("hr",{}),Object(j.jsx)(O,{sectionName:"Flour",recipe:c,ingredients:f,ingredientType:"flour",handleClickAddIngredient:function(e,t){return k(e,t)},handleChangeIngredient:function(e,t){return E(e,t)},handleSubtractClick:function(e,t,n){return T(e,t,n)}}),Object(j.jsx)(O,{sectionName:"Ingredients",recipe:c,ingredients:v,ingredientType:"ingredient",handleClickAddIngredient:function(e,t){return k(e,t)},handleChangeIngredient:function(e,t){return E(e,t)},handleSubtractClick:function(e,t,n){return T(e,t,n)}}),Object(j.jsx)(_,{formData:{recipe_name:c.recipe_name,flour_total:c.flour_total,flours:f,ingredients:v},formName:"recipe",endpointSuffix:"recipes",redirectSuffix:"/",rowId:C})]})},E=function(e,t){switch(t.type){case"FETCH_INIT":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,isLoaded:!1,isError:!1});case"FETCH_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isLoaded:!0,isError:!1,data:t.payload});case"FETCH_FAILURE":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isLoaded:!1,isError:!0,error:t.error});default:throw new Error}},S=function(e){return e.map((function(e){return"".concat(x.API_ENDPOINT,"/").concat(e)}))},I=function(){var e=Object(v.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}})})));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=k(t)).status){e.next=5;break}return e.abrupt("return",{type:"FETCH_FAILURE",error:n});case 5:return e.next=7,Promise.all(t.map((function(e){return e.json()})));case 7:return r=e.sent,e.abrupt("return",{type:"FETCH_SUCCESS",payload:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t={};return e.forEach((function(e){e.ok||(t={status:e.status,statusText:e.statusText})})),t};var D=function(e){var t=function(e){var t=Object(r.useReducer)(E,{isLoading:!0,isError:!1,error:{},data:[]}),n=Object(d.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){var t=!1;return function(){var n=Object(v.a)(m.a.mark((function n(){var r,c,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.length){n.next=2;break}return n.abrupt("return",a({type:"FETCH_SUCCESS",payload:{}}));case 2:if(a({type:"FETCH_INIT"}),r=S(e),n.prev=4,t){n.next=14;break}return n.next=9,I(r,"1234");case 9:return c=n.sent,n.next=12,T(c);case 12:i=n.sent,a(i);case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(4),t||a({type:"FETCH_FAILURE",error:{status:"NA",statusText:"Failed to fetch resource"}});case 19:case"end":return n.stop()}}),n,null,[[4,16]])})));return function(){return n.apply(this,arguments)}}()(),function(){t=!0}}),[e]),[c,a]}(e.endpointArr),n=Object(d.a)(t,1)[0],a=n.data,i=n.isLoading,s=n.isError,o=n.error,u=function(){return Object(j.jsxs)("h1",{children:[o.status," ",o.statusText]})},l=function(){return Object(j.jsx)(j.Fragment,{children:c.a.cloneElement(e.children,{data:a})})};return Object(j.jsx)(j.Fragment,{children:i?Object(j.jsx)("h1",{children:"Loading..."}):s?u():l()})};var y=function(){var e=Object(s.f)().recipeId,t="new"===e?[]:["recipes/".concat(e)];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(D,{endpointArr:t,children:Object(j.jsx)(C,{})})})},F=n(10);var w=function(e){return Object(j.jsx)(F.b,{className:"recipe-list__link",to:"/form/recipe/".concat(e.recipe.recipe_id),children:Object(j.jsx)("li",{className:"recipe-list__list-item",children:e.recipe.recipe_name})})};var A=function(e){return Object(j.jsx)("main",{children:Object(j.jsx)("ul",{className:"recipe-list",children:e.data[0].map((function(e){return Object(j.jsx)(w,{recipe:e},e.recipe_id)}))})})};var P=function(){return Object(j.jsx)(D,{endpointArr:["recipes"],children:Object(j.jsx)(A,{})})};var L=function(){return Object(j.jsxs)(s.c,{children:[Object(j.jsx)(s.a,{path:"/form/recipe/:recipeId",component:y}),Object(j.jsx)(s.a,{exact:!0,path:"/",component:P})]})};var H=function(){return Object(j.jsx)("nav",{className:"navbar",children:Object(j.jsxs)("div",{className:"navbar__content",children:[Object(j.jsx)(F.b,{className:"navbar__link",to:"/",children:"Baker's Books"}),Object(j.jsx)(F.b,{className:"navbar__link",to:"/form/recipe/new",children:"New"})]})})};var R=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(H,{}),Object(j.jsx)(L,{})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(F.a,{children:Object(j.jsx)(R,{})})}),document.getElementById("root")),V()}},[[37,1,2]]]);
//# sourceMappingURL=main.e6c0b9d9.chunk.js.map