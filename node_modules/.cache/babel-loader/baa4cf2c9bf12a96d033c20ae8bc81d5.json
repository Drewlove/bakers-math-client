{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback } from \"react\";\nimport config from \"../../Config\"; // import { useAuth0 } from \"@auth0/auth0-react\";\n\nexport const API_SAVE = (formData, endpointSuffix, rowId) => {\n  _s();\n\n  const [resSave, setRes] = useState({\n    formData: null,\n    isSaving: false,\n    saveSuccessful: false,\n    saveError: \"\"\n  }); //   const { getAccessTokenSilently } = useAuth0();\n\n  let saveMethod; //   const { user } = useAuth0();\n  //   const userId = user.sub.split(\"|\")[1];\n  //   let url = `${config.API_ENDPOINT}/${endpointSuffix}/${userId}`;\n\n  let url = `${config.API_ENDPOINT}/${endpointSuffix}`;\n\n  if (rowId === \"new\") {\n    saveMethod = \"POST\";\n  } else {\n    saveMethod = \"PATCH\";\n    url = `${url}/${rowId}`;\n  }\n\n  const saveData = useCallback(async () => {\n    setRes(prevState => ({ ...prevState,\n      isSaving: true\n    }));\n\n    try {\n      const token = await getAccessTokenSilently();\n      const result = await fetch(url, {\n        method: saveMethod,\n        body: JSON.stringify(formData),\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (result.ok) setRes(prevState => ({ ...prevState,\n        isSaving: false,\n        saveSuccessful: true,\n        saveError: \"\"\n      }));else if (!result.ok) {\n        setRes(prevState => ({ ...prevState,\n          isSaving: false,\n          saveSuccessful: false,\n          saveError: \"Failed to save.\"\n        }));\n      }\n    } catch (error) {\n      setRes(prevState => ({ ...prevState,\n        isSaving: false,\n        saveSuccessful: false,\n        saveError: \"Failed to save.\"\n      }));\n    }\n  }, [formData, saveMethod, getAccessTokenSilently, url]);\n  return [resSave, saveData];\n};\n\n_s(API_SAVE, \"xrRN2a6Wkoh+vBKquIaq8gcsSPg=\");\n\n_c = API_SAVE;\n\nvar _c;\n\n$RefreshReg$(_c, \"API_SAVE\");","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/Utilities/APImethods/API_SAVE.js"],"names":["useState","useCallback","config","API_SAVE","formData","endpointSuffix","rowId","resSave","setRes","isSaving","saveSuccessful","saveError","saveMethod","url","API_ENDPOINT","saveData","prevState","token","getAccessTokenSilently","result","fetch","method","body","JSON","stringify","headers","Authorization","ok","error"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,OAAOC,MAAP,MAAmB,cAAnB,C,CACA;;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAACC,QAAD,EAAWC,cAAX,EAA2BC,KAA3B,KAAqC;AAAA;;AAC3D,QAAM,CAACC,OAAD,EAAUC,MAAV,IAAoBR,QAAQ,CAAC;AACjCI,IAAAA,QAAQ,EAAE,IADuB;AAEjCK,IAAAA,QAAQ,EAAE,KAFuB;AAGjCC,IAAAA,cAAc,EAAE,KAHiB;AAIjCC,IAAAA,SAAS,EAAE;AAJsB,GAAD,CAAlC,CAD2D,CAQ3D;;AAEA,MAAIC,UAAJ,CAV2D,CAW3D;AACA;AAEA;;AACA,MAAIC,GAAG,GAAI,GAAEX,MAAM,CAACY,YAAa,IAAGT,cAAe,EAAnD;;AACA,MAAIC,KAAK,KAAK,KAAd,EAAqB;AACnBM,IAAAA,UAAU,GAAG,MAAb;AACD,GAFD,MAEO;AACLA,IAAAA,UAAU,GAAG,OAAb;AACAC,IAAAA,GAAG,GAAI,GAAEA,GAAI,IAAGP,KAAM,EAAtB;AACD;;AAED,QAAMS,QAAQ,GAAGd,WAAW,CAAC,YAAY;AACvCO,IAAAA,MAAM,CAAEQ,SAAD,KAAgB,EAAE,GAAGA,SAAL;AAAgBP,MAAAA,QAAQ,EAAE;AAA1B,KAAhB,CAAD,CAAN;;AACA,QAAI;AACF,YAAMQ,KAAK,GAAG,MAAMC,sBAAsB,EAA1C;AAEA,YAAMC,MAAM,GAAG,MAAMC,KAAK,CAACP,GAAD,EAAM;AAC9BQ,QAAAA,MAAM,EAAET,UADsB;AAE9BU,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAepB,QAAf,CAFwB;AAG9BqB,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAST,KAAM,EADxB;AAEP,0BAAgB;AAFT;AAHqB,OAAN,CAA1B;AAQA,UAAIE,MAAM,CAACQ,EAAX,EACEnB,MAAM,CAAEQ,SAAD,KAAgB,EACrB,GAAGA,SADkB;AAErBP,QAAAA,QAAQ,EAAE,KAFW;AAGrBC,QAAAA,cAAc,EAAE,IAHK;AAIrBC,QAAAA,SAAS,EAAE;AAJU,OAAhB,CAAD,CAAN,CADF,KAOK,IAAI,CAACQ,MAAM,CAACQ,EAAZ,EAAgB;AACnBnB,QAAAA,MAAM,CAAEQ,SAAD,KAAgB,EACrB,GAAGA,SADkB;AAErBP,UAAAA,QAAQ,EAAE,KAFW;AAGrBC,UAAAA,cAAc,EAAE,KAHK;AAIrBC,UAAAA,SAAS,EAAE;AAJU,SAAhB,CAAD,CAAN;AAMD;AACF,KA1BD,CA0BE,OAAOiB,KAAP,EAAc;AACdpB,MAAAA,MAAM,CAAEQ,SAAD,KAAgB,EACrB,GAAGA,SADkB;AAErBP,QAAAA,QAAQ,EAAE,KAFW;AAGrBC,QAAAA,cAAc,EAAE,KAHK;AAIrBC,QAAAA,SAAS,EAAE;AAJU,OAAhB,CAAD,CAAN;AAMD;AACF,GApC2B,EAoCzB,CAACP,QAAD,EAAWQ,UAAX,EAAuBM,sBAAvB,EAA+CL,GAA/C,CApCyB,CAA5B;AAqCA,SAAO,CAACN,OAAD,EAAUQ,QAAV,CAAP;AACD,CA7DM;;GAAMZ,Q;;KAAAA,Q","sourcesContent":["import { useState, useCallback } from \"react\";\nimport config from \"../../Config\";\n// import { useAuth0 } from \"@auth0/auth0-react\";\n\nexport const API_SAVE = (formData, endpointSuffix, rowId) => {\n  const [resSave, setRes] = useState({\n    formData: null,\n    isSaving: false,\n    saveSuccessful: false,\n    saveError: \"\",\n  });\n\n  //   const { getAccessTokenSilently } = useAuth0();\n\n  let saveMethod;\n  //   const { user } = useAuth0();\n  //   const userId = user.sub.split(\"|\")[1];\n\n  //   let url = `${config.API_ENDPOINT}/${endpointSuffix}/${userId}`;\n  let url = `${config.API_ENDPOINT}/${endpointSuffix}`;\n  if (rowId === \"new\") {\n    saveMethod = \"POST\";\n  } else {\n    saveMethod = \"PATCH\";\n    url = `${url}/${rowId}`;\n  }\n\n  const saveData = useCallback(async () => {\n    setRes((prevState) => ({ ...prevState, isSaving: true }));\n    try {\n      const token = await getAccessTokenSilently();\n\n      const result = await fetch(url, {\n        method: saveMethod,\n        body: JSON.stringify(formData),\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      if (result.ok)\n        setRes((prevState) => ({\n          ...prevState,\n          isSaving: false,\n          saveSuccessful: true,\n          saveError: \"\",\n        }));\n      else if (!result.ok) {\n        setRes((prevState) => ({\n          ...prevState,\n          isSaving: false,\n          saveSuccessful: false,\n          saveError: \"Failed to save.\",\n        }));\n      }\n    } catch (error) {\n      setRes((prevState) => ({\n        ...prevState,\n        isSaving: false,\n        saveSuccessful: false,\n        saveError: \"Failed to save.\",\n      }));\n    }\n  }, [formData, saveMethod, getAccessTokenSilently, url]);\n  return [resSave, saveData];\n};\n"]},"metadata":{},"sourceType":"module"}