{"ast":null,"code":"import _toConsumableArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import RecipeFormHeader from\"../RecipeFormHeader/RecipeFormHeader\";import RecipeFormSection from\"../RecipeFormSection/RecipeFormSection\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecipeForm(props){var _useState=useState({recipe_name:\"\",flour_total:\"\"}),_useState2=_slicedToArray(_useState,2),recipe=_useState2[0],setRecipe=_useState2[1];var _useState3=useState([{name:\"\",percent:\"\",id:\"\"}]),_useState4=_slicedToArray(_useState3,2),flours=_useState4[0],setFlours=_useState4[1];var _useState5=useState([{name:\"\",percent:\"\",id:\"\"}]),_useState6=_slicedToArray(_useState5,2),ingredients=_useState6[0],setIngredients=_useState6[1];var _useParams=useParams(),recipeId=_useParams.recipeId;useEffect(function(){if(recipeId!==\"new\"){var _recipe=props.data[0];var _flours=_recipe.flours,_ingredients=_recipe.ingredients;setFlours(getArrWithKeyIds(_flours));setIngredients(getArrWithKeyIds(_ingredients));setRecipe({recipe_name:_recipe.recipe_name,flour_total:_recipe.flour_total});}else{setFlours([{name:\"\",percent:\"\",id:Date.now()}]);setIngredients([{name:\"\",percent:\"\",id:Date.now()}]);setRecipe({recipe_name:\"\",flour_total:\"\"});}},[props.data,recipeId]);var getArrWithKeyIds=function getArrWithKeyIds(arr){return arr.map(function(key){return _objectSpread(_objectSpread({},key),{},{id:\"\".concat(key.name,\"-\").concat(key.percent)});});};var _handleChangeRecipe=function handleChangeRecipe(e){setRecipe(_objectSpread(_objectSpread({},recipe),{},_defineProperty({},e.target.name,e.target.value)));};var _handleChangeIngredient=function handleChangeIngredient(e,ingredientType){var nameArr=e.target.name.split(\"_\");var propertyName=nameArr[0];var id=parseInt(nameArr[1]);if(ingredientType===\"flour\")updateFlour(e,propertyName,id);else if(ingredientType===\"ingredient\")updateIngredient(e,propertyName,id);};var updateIngredient=function updateIngredient(e,propertyName,id){setIngredients(ingredients.map(function(key){return key.id===id?_objectSpread(_objectSpread({},key),{},_defineProperty({},propertyName,e.target.value)):key;}));};var updateFlour=function updateFlour(e,propertyName,id){setFlours(flours.map(function(key){return key.id===id?_objectSpread(_objectSpread({},key),{},_defineProperty({},propertyName,e.target.value)):key;}));};var _handleSubtractClick=function handleSubtractClick(e,id,ingredientType){e.preventDefault();if(ingredientType===\"flour\")setFlours(flours.filter(function(key){return key.id!==id;}));else if(ingredientType===\"ingredient\")setIngredients(ingredients.filter(function(key){return key.id!==id;}));};var _handleClickAddIngredient=function handleClickAddIngredient(e,ingredientType){e.preventDefault();if(ingredientType===\"flour\")setFlours([].concat(_toConsumableArray(flours),[{name:\"\",percent:\"\",id:Date.now()}]));else if(ingredientType===\"ingredient\")setIngredients([].concat(_toConsumableArray(ingredients),[{name:\"\",percent:\"\",id:Date.now()}]));};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(RecipeFormHeader,{recipe:recipe,handleChangeRecipe:function handleChangeRecipe(e){return _handleChangeRecipe(e);}}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(RecipeFormSection,{sectionName:\"Flour\",recipe:recipe,ingredients:flours,ingredientType:\"flour\",handleClickAddIngredient:function handleClickAddIngredient(e,ingredientType){return _handleClickAddIngredient(e,ingredientType);},handleChangeIngredient:function handleChangeIngredient(e,ingredientType){return _handleChangeIngredient(e,ingredientType);},handleSubtractClick:function handleSubtractClick(e,id,ingredientType){return _handleSubtractClick(e,id,ingredientType);}}),/*#__PURE__*/_jsx(RecipeFormSection,{sectionName:\"Ingredients\",recipe:recipe,ingredients:ingredients,ingredientType:\"ingredient\",handleClickAddIngredient:function handleClickAddIngredient(e,ingredientType){return _handleClickAddIngredient(e,ingredientType);},handleChangeIngredient:function handleChangeIngredient(e,ingredientType){return _handleChangeIngredient(e,ingredientType);},handleSubtractClick:function handleSubtractClick(e,id,ingredientType){return _handleSubtractClick(e,id,ingredientType);}})]});}export default RecipeForm;","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/RecipeForm/RecipeForm/RecipeForm.js"],"names":["useEffect","useState","RecipeFormHeader","RecipeFormSection","useParams","RecipeForm","props","recipe_name","flour_total","recipe","setRecipe","name","percent","id","flours","setFlours","ingredients","setIngredients","recipeId","data","getArrWithKeyIds","Date","now","arr","map","key","handleChangeRecipe","e","target","value","handleChangeIngredient","ingredientType","nameArr","split","propertyName","parseInt","updateFlour","updateIngredient","handleSubtractClick","preventDefault","filter","handleClickAddIngredient"],"mappings":"ioBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,gBAAP,KAA6B,sCAA7B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,wCAA9B,CACA,OAASC,SAAT,KAA0B,kBAA1B,C,wFAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,eACGL,QAAQ,CAAC,CACnCM,WAAW,CAAE,EADsB,CAEnCC,WAAW,CAAE,EAFsB,CAAD,CADX,wCAClBC,MADkB,eACVC,SADU,8BAMGT,QAAQ,CAAC,CAAC,CAAEU,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAE,EAArB,CAAyBC,EAAE,CAAE,EAA7B,CAAD,CAAD,CANX,yCAMlBC,MANkB,eAMVC,SANU,8BAOad,QAAQ,CAAC,CAC7C,CAAEU,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAE,EAArB,CAAyBC,EAAE,CAAE,EAA7B,CAD6C,CAAD,CAPrB,yCAOlBG,WAPkB,eAOLC,cAPK,8BAWJb,SAAS,EAXL,CAWjBc,QAXiB,YAWjBA,QAXiB,CAazBlB,SAAS,CAAC,UAAM,CACd,GAAIkB,QAAQ,GAAK,KAAjB,CAAwB,CACtB,GAAMT,CAAAA,OAAM,CAAGH,KAAK,CAACa,IAAN,CAAW,CAAX,CAAf,CADsB,GAEdL,CAAAA,OAFc,CAEUL,OAFV,CAEdK,MAFc,CAENE,YAFM,CAEUP,OAFV,CAENO,WAFM,CAGtBD,SAAS,CAACK,gBAAgB,CAACN,OAAD,CAAjB,CAAT,CACAG,cAAc,CAACG,gBAAgB,CAACJ,YAAD,CAAjB,CAAd,CACAN,SAAS,CAAC,CACRH,WAAW,CAAEE,OAAM,CAACF,WADZ,CAERC,WAAW,CAAEC,OAAM,CAACD,WAFZ,CAAD,CAAT,CAID,CATD,IASO,CACLO,SAAS,CAAC,CAAC,CAAEJ,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAE,EAArB,CAAyBC,EAAE,CAAEQ,IAAI,CAACC,GAAL,EAA7B,CAAD,CAAD,CAAT,CACAL,cAAc,CAAC,CAAC,CAAEN,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAE,EAArB,CAAyBC,EAAE,CAAEQ,IAAI,CAACC,GAAL,EAA7B,CAAD,CAAD,CAAd,CACAZ,SAAS,CAAC,CAAEH,WAAW,CAAE,EAAf,CAAmBC,WAAW,CAAE,EAAhC,CAAD,CAAT,CACD,CACF,CAfQ,CAeN,CAACF,KAAK,CAACa,IAAP,CAAaD,QAAb,CAfM,CAAT,CAiBA,GAAME,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACG,GAAD,CAAS,CAChC,MAAOA,CAAAA,GAAG,CAACC,GAAJ,CAAQ,SAACC,GAAD,CAAS,CACtB,sCAAYA,GAAZ,MAAiBZ,EAAE,WAAKY,GAAG,CAACd,IAAT,aAAiBc,GAAG,CAACb,OAArB,CAAnB,GACD,CAFM,CAAP,CAGD,CAJD,CAMA,GAAMc,CAAAA,mBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,CAAD,CAAO,CAChCjB,SAAS,gCAAMD,MAAN,wBAAekB,CAAC,CAACC,MAAF,CAASjB,IAAxB,CAA+BgB,CAAC,CAACC,MAAF,CAASC,KAAxC,GAAT,CACD,CAFD,CAIA,GAAMC,CAAAA,uBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACH,CAAD,CAAII,cAAJ,CAAuB,CACpD,GAAIC,CAAAA,OAAO,CAAGL,CAAC,CAACC,MAAF,CAASjB,IAAT,CAAcsB,KAAd,CAAoB,GAApB,CAAd,CACA,GAAMC,CAAAA,YAAY,CAAGF,OAAO,CAAC,CAAD,CAA5B,CACA,GAAMnB,CAAAA,EAAE,CAAGsB,QAAQ,CAACH,OAAO,CAAC,CAAD,CAAR,CAAnB,CACA,GAAID,cAAc,GAAK,OAAvB,CAAgCK,WAAW,CAACT,CAAD,CAAIO,YAAJ,CAAkBrB,EAAlB,CAAX,CAAhC,IACK,IAAIkB,cAAc,GAAK,YAAvB,CACHM,gBAAgB,CAACV,CAAD,CAAIO,YAAJ,CAAkBrB,EAAlB,CAAhB,CACH,CAPD,CASA,GAAMwB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACV,CAAD,CAAIO,YAAJ,CAAkBrB,EAAlB,CAAyB,CAChDI,cAAc,CACZD,WAAW,CAACQ,GAAZ,CAAgB,SAACC,GAAD,QACdA,CAAAA,GAAG,CAACZ,EAAJ,GAAWA,EAAX,gCAAqBY,GAArB,wBAA2BS,YAA3B,CAA0CP,CAAC,CAACC,MAAF,CAASC,KAAnD,GAA6DJ,GAD/C,EAAhB,CADY,CAAd,CAKD,CAND,CAQA,GAAMW,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACT,CAAD,CAAIO,YAAJ,CAAkBrB,EAAlB,CAAyB,CAC3CE,SAAS,CACPD,MAAM,CAACU,GAAP,CAAW,SAACC,GAAD,QACTA,CAAAA,GAAG,CAACZ,EAAJ,GAAWA,EAAX,gCAAqBY,GAArB,wBAA2BS,YAA3B,CAA0CP,CAAC,CAACC,MAAF,CAASC,KAAnD,GAA6DJ,GADpD,EAAX,CADO,CAAT,CAKD,CAND,CAOA,GAAMa,CAAAA,oBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACX,CAAD,CAAId,EAAJ,CAAQkB,cAAR,CAA2B,CACrDJ,CAAC,CAACY,cAAF,GACA,GAAIR,cAAc,GAAK,OAAvB,CACEhB,SAAS,CAACD,MAAM,CAAC0B,MAAP,CAAc,SAACf,GAAD,QAASA,CAAAA,GAAG,CAACZ,EAAJ,GAAWA,EAApB,EAAd,CAAD,CAAT,CADF,IAEK,IAAIkB,cAAc,GAAK,YAAvB,CACHd,cAAc,CAACD,WAAW,CAACwB,MAAZ,CAAmB,SAACf,GAAD,QAASA,CAAAA,GAAG,CAACZ,EAAJ,GAAWA,EAApB,EAAnB,CAAD,CAAd,CACH,CAND,CAQA,GAAM4B,CAAAA,yBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,CAACd,CAAD,CAAII,cAAJ,CAAuB,CACtDJ,CAAC,CAACY,cAAF,GACA,GAAIR,cAAc,GAAK,OAAvB,CACEhB,SAAS,8BAAKD,MAAL,GAAa,CAAEH,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAE,EAArB,CAAyBC,EAAE,CAAEQ,IAAI,CAACC,GAAL,EAA7B,CAAb,GAAT,CADF,IAEK,IAAIS,cAAc,GAAK,YAAvB,CACHd,cAAc,8BACTD,WADS,GAEZ,CAAEL,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAE,EAArB,CAAyBC,EAAE,CAAEQ,IAAI,CAACC,GAAL,EAA7B,CAFY,GAAd,CAIH,CATD,CAWA,mBACE,qCACE,KAAC,gBAAD,EACE,MAAM,CAAEb,MADV,CAEE,kBAAkB,CAAE,4BAACkB,CAAD,QAAOD,CAAAA,mBAAkB,CAACC,CAAD,CAAzB,EAFtB,EADF,cAME,aANF,cAOE,KAAC,iBAAD,EACE,WAAW,CAAC,OADd,CAEE,MAAM,CAAElB,MAFV,CAGE,WAAW,CAAEK,MAHf,CAIE,cAAc,CAAC,OAJjB,CAKE,wBAAwB,CAAE,kCAACa,CAAD,CAAII,cAAJ,QACxBU,CAAAA,yBAAwB,CAACd,CAAD,CAAII,cAAJ,CADA,EAL5B,CAQE,sBAAsB,CAAE,gCAACJ,CAAD,CAAII,cAAJ,QACtBD,CAAAA,uBAAsB,CAACH,CAAD,CAAII,cAAJ,CADA,EAR1B,CAWE,mBAAmB,CAAE,6BAACJ,CAAD,CAAId,EAAJ,CAAQkB,cAAR,QACnBO,CAAAA,oBAAmB,CAACX,CAAD,CAAId,EAAJ,CAAQkB,cAAR,CADA,EAXvB,EAPF,cAsBE,KAAC,iBAAD,EACE,WAAW,CAAC,aADd,CAEE,MAAM,CAAEtB,MAFV,CAGE,WAAW,CAAEO,WAHf,CAIE,cAAc,CAAC,YAJjB,CAKE,wBAAwB,CAAE,kCAACW,CAAD,CAAII,cAAJ,QACxBU,CAAAA,yBAAwB,CAACd,CAAD,CAAII,cAAJ,CADA,EAL5B,CAQE,sBAAsB,CAAE,gCAACJ,CAAD,CAAII,cAAJ,QACtBD,CAAAA,uBAAsB,CAACH,CAAD,CAAII,cAAJ,CADA,EAR1B,CAWE,mBAAmB,CAAE,6BAACJ,CAAD,CAAId,EAAJ,CAAQkB,cAAR,QACnBO,CAAAA,oBAAmB,CAACX,CAAD,CAAId,EAAJ,CAAQkB,cAAR,CADA,EAXvB,EAtBF,GADF,CAwCD,CAED,cAAe1B,CAAAA,UAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport RecipeFormHeader from \"../RecipeFormHeader/RecipeFormHeader\";\nimport RecipeFormSection from \"../RecipeFormSection/RecipeFormSection\";\nimport { useParams } from \"react-router-dom\";\n\nfunction RecipeForm(props) {\n  const [recipe, setRecipe] = useState({\n    recipe_name: \"\",\n    flour_total: \"\",\n  });\n\n  const [flours, setFlours] = useState([{ name: \"\", percent: \"\", id: \"\" }]);\n  const [ingredients, setIngredients] = useState([\n    { name: \"\", percent: \"\", id: \"\" },\n  ]);\n\n  const { recipeId } = useParams();\n\n  useEffect(() => {\n    if (recipeId !== \"new\") {\n      const recipe = props.data[0];\n      const { flours, ingredients } = recipe;\n      setFlours(getArrWithKeyIds(flours));\n      setIngredients(getArrWithKeyIds(ingredients));\n      setRecipe({\n        recipe_name: recipe.recipe_name,\n        flour_total: recipe.flour_total,\n      });\n    } else {\n      setFlours([{ name: \"\", percent: \"\", id: Date.now() }]);\n      setIngredients([{ name: \"\", percent: \"\", id: Date.now() }]);\n      setRecipe({ recipe_name: \"\", flour_total: \"\" });\n    }\n  }, [props.data, recipeId]);\n\n  const getArrWithKeyIds = (arr) => {\n    return arr.map((key) => {\n      return { ...key, id: `${key.name}-${key.percent}` };\n    });\n  };\n\n  const handleChangeRecipe = (e) => {\n    setRecipe({ ...recipe, [e.target.name]: e.target.value });\n  };\n\n  const handleChangeIngredient = (e, ingredientType) => {\n    let nameArr = e.target.name.split(\"_\");\n    const propertyName = nameArr[0];\n    const id = parseInt(nameArr[1]);\n    if (ingredientType === \"flour\") updateFlour(e, propertyName, id);\n    else if (ingredientType === \"ingredient\")\n      updateIngredient(e, propertyName, id);\n  };\n\n  const updateIngredient = (e, propertyName, id) => {\n    setIngredients(\n      ingredients.map((key) =>\n        key.id === id ? { ...key, [propertyName]: e.target.value } : key\n      )\n    );\n  };\n\n  const updateFlour = (e, propertyName, id) => {\n    setFlours(\n      flours.map((key) =>\n        key.id === id ? { ...key, [propertyName]: e.target.value } : key\n      )\n    );\n  };\n  const handleSubtractClick = (e, id, ingredientType) => {\n    e.preventDefault();\n    if (ingredientType === \"flour\")\n      setFlours(flours.filter((key) => key.id !== id));\n    else if (ingredientType === \"ingredient\")\n      setIngredients(ingredients.filter((key) => key.id !== id));\n  };\n\n  const handleClickAddIngredient = (e, ingredientType) => {\n    e.preventDefault();\n    if (ingredientType === \"flour\")\n      setFlours([...flours, { name: \"\", percent: \"\", id: Date.now() }]);\n    else if (ingredientType === \"ingredient\")\n      setIngredients([\n        ...ingredients,\n        { name: \"\", percent: \"\", id: Date.now() },\n      ]);\n  };\n\n  return (\n    <form>\n      <RecipeFormHeader\n        recipe={recipe}\n        handleChangeRecipe={(e) => handleChangeRecipe(e)}\n      />\n\n      <hr />\n      <RecipeFormSection\n        sectionName=\"Flour\"\n        recipe={recipe}\n        ingredients={flours}\n        ingredientType=\"flour\"\n        handleClickAddIngredient={(e, ingredientType) =>\n          handleClickAddIngredient(e, ingredientType)\n        }\n        handleChangeIngredient={(e, ingredientType) =>\n          handleChangeIngredient(e, ingredientType)\n        }\n        handleSubtractClick={(e, id, ingredientType) =>\n          handleSubtractClick(e, id, ingredientType)\n        }\n      />\n      <RecipeFormSection\n        sectionName=\"Ingredients\"\n        recipe={recipe}\n        ingredients={ingredients}\n        ingredientType=\"ingredient\"\n        handleClickAddIngredient={(e, ingredientType) =>\n          handleClickAddIngredient(e, ingredientType)\n        }\n        handleChangeIngredient={(e, ingredientType) =>\n          handleChangeIngredient(e, ingredientType)\n        }\n        handleSubtractClick={(e, id, ingredientType) =>\n          handleSubtractClick(e, id, ingredientType)\n        }\n      />\n    </form>\n  );\n}\n\nexport default RecipeForm;\n"]},"metadata":{},"sourceType":"module"}