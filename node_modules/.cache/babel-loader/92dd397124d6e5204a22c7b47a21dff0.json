{"ast":null,"code":"import _toConsumableArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import RecipeFormHeader from\"../RecipeFormHeader/RecipeFormHeader\";import RecipeFormSection from\"../RecipeFormSection/RecipeFormSection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecipeForm(props){var _useState=useState({recipe_name:\"\",flour_total:\"\"}),_useState2=_slicedToArray(_useState,2),recipe=_useState2[0],setRecipe=_useState2[1];var _useState3=useState([{name:\"\",percent:\"\",id:\"\"}]),_useState4=_slicedToArray(_useState3,2),flours=_useState4[0],setFlours=_useState4[1];var _useState5=useState([{name:\"\",percent:\"\",id:\"\"}]),_useState6=_slicedToArray(_useState5,2),ingredients=_useState6[0],setIngredients=_useState6[1];useEffect(function(){var recipe=props.data[0];var flours=recipe.flours,ingredients=recipe.ingredients;setFlours(getArrWithKeyIds(flours));setIngredients(getArrWithKeyIds(ingredients));setRecipe({recipe_name:recipe.recipe_name,flour_total:recipe.flour_total});},[props.data]);var getArrWithKeyIds=function getArrWithKeyIds(arr){return arr.map(function(key){return _objectSpread(_objectSpread({},key),{},{id:\"\".concat(key.name,\"-\").concat(key.percent)});});};var _handleChangeRecipe=function handleChangeRecipe(e){setRecipe(_objectSpread(_objectSpread({},recipe),{},_defineProperty({},e.target.name,e.target.value)));};var _handleChangeIngredient=function handleChangeIngredient(e,ingredientType){var nameArr=e.target.name.split(\"_\");var propertyName=nameArr[0];var id=parseInt(nameArr[1]);if(ingredientType===\"flour\")updateFlour(e,propertyName,id);else if(ingredientType===\"ingredient\")updateIngredient(e,propertyName,id);};var updateIngredient=function updateIngredient(e,propertyName,id){setIngredients(ingredients.map(function(key){return key.id===id?_objectSpread(_objectSpread({},key),{},_defineProperty({},propertyName,e.target.value)):key;}));};var updateFlour=function updateFlour(e,propertyName,id){setFlours(flours.map(function(key){return key.id===id?_objectSpread(_objectSpread({},key),{},_defineProperty({},propertyName,e.target.value)):key;}));};var _handleSubtractClick=function handleSubtractClick(e,id,ingredientType){e.preventDefault();if(ingredientType===\"flour\")setFlours(flours.filter(function(key){return key.id!==id;}));else if(ingredientType===\"ingredient\")setIngredients(ingredients.filter(function(key){return key.id!==id;}));};var _handleClickAddIngredient=function handleClickAddIngredient(e,ingredientType){e.preventDefault();if(ingredientType===\"flour\")setFlours([].concat(_toConsumableArray(flours),[{name:\"\",percent:\"\",id:Date.now()}]));else if(ingredientType===\"ingredient\")setIngredients([].concat(_toConsumableArray(ingredients),[{name:\"\",percent:\"\",id:Date.now()}]));};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(RecipeFormHeader,{recipe:recipe,handleChangeRecipe:function handleChangeRecipe(e){return _handleChangeRecipe(e);}}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(RecipeFormSection,{sectionName:\"Flour\",recipe:recipe,ingredients:flours,ingredientType:\"flour\",handleClickAddIngredient:function handleClickAddIngredient(e,ingredientType){return _handleClickAddIngredient(e,ingredientType);},handleChangeIngredient:function handleChangeIngredient(e,ingredientType){return _handleChangeIngredient(e,ingredientType);},handleSubtractClick:function handleSubtractClick(e,id,ingredientType){return _handleSubtractClick(e,id,ingredientType);}}),/*#__PURE__*/_jsx(RecipeFormSection,{sectionName:\"Ingredients\",recipe:recipe,ingredients:ingredients,ingredientType:\"ingredient\",handleClickAddIngredient:function handleClickAddIngredient(e,ingredientType){return _handleClickAddIngredient(e,ingredientType);},handleChangeIngredient:function handleChangeIngredient(e,ingredientType){return _handleChangeIngredient(e,ingredientType);},handleSubtractClick:function handleSubtractClick(e,id,ingredientType){return _handleSubtractClick(e,id,ingredientType);}})]});}export default RecipeForm;","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/RecipeForm/RecipeForm/RecipeForm.js"],"names":["useEffect","useState","RecipeFormHeader","RecipeFormSection","RecipeForm","props","recipe_name","flour_total","recipe","setRecipe","name","percent","id","flours","setFlours","ingredients","setIngredients","data","getArrWithKeyIds","arr","map","key","handleChangeRecipe","e","target","value","handleChangeIngredient","ingredientType","nameArr","split","propertyName","parseInt","updateFlour","updateIngredient","handleSubtractClick","preventDefault","filter","handleClickAddIngredient","Date","now"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport RecipeFormHeader from \"../RecipeFormHeader/RecipeFormHeader\";\nimport RecipeFormSection from \"../RecipeFormSection/RecipeFormSection\";\n\nfunction RecipeForm(props) {\n  const [recipe, setRecipe] = useState({\n    recipe_name: \"\",\n    flour_total: \"\",\n  });\n\n  const [flours, setFlours] = useState([{ name: \"\", percent: \"\", id: \"\" }]);\n  const [ingredients, setIngredients] = useState([\n    { name: \"\", percent: \"\", id: \"\" },\n  ]);\n\n  useEffect(() => {\n    const recipe = props.data[0];\n    const { flours, ingredients } = recipe;\n    setFlours(getArrWithKeyIds(flours));\n    setIngredients(getArrWithKeyIds(ingredients));\n    setRecipe({\n      recipe_name: recipe.recipe_name,\n      flour_total: recipe.flour_total,\n    });\n  }, [props.data]);\n\n  const getArrWithKeyIds = (arr) => {\n    return arr.map((key) => {\n      return { ...key, id: `${key.name}-${key.percent}` };\n    });\n  };\n\n  const handleChangeRecipe = (e) => {\n    setRecipe({ ...recipe, [e.target.name]: e.target.value });\n  };\n\n  const handleChangeIngredient = (e, ingredientType) => {\n    let nameArr = e.target.name.split(\"_\");\n    const propertyName = nameArr[0];\n    const id = parseInt(nameArr[1]);\n    if (ingredientType === \"flour\") updateFlour(e, propertyName, id);\n    else if (ingredientType === \"ingredient\")\n      updateIngredient(e, propertyName, id);\n  };\n\n  const updateIngredient = (e, propertyName, id) => {\n    setIngredients(\n      ingredients.map((key) =>\n        key.id === id ? { ...key, [propertyName]: e.target.value } : key\n      )\n    );\n  };\n\n  const updateFlour = (e, propertyName, id) => {\n    setFlours(\n      flours.map((key) =>\n        key.id === id ? { ...key, [propertyName]: e.target.value } : key\n      )\n    );\n  };\n  const handleSubtractClick = (e, id, ingredientType) => {\n    e.preventDefault();\n    if (ingredientType === \"flour\")\n      setFlours(flours.filter((key) => key.id !== id));\n    else if (ingredientType === \"ingredient\")\n      setIngredients(ingredients.filter((key) => key.id !== id));\n  };\n\n  const handleClickAddIngredient = (e, ingredientType) => {\n    e.preventDefault();\n    if (ingredientType === \"flour\")\n      setFlours([...flours, { name: \"\", percent: \"\", id: Date.now() }]);\n    else if (ingredientType === \"ingredient\")\n      setIngredients([\n        ...ingredients,\n        { name: \"\", percent: \"\", id: Date.now() },\n      ]);\n  };\n\n  return (\n    <form>\n      <RecipeFormHeader\n        recipe={recipe}\n        handleChangeRecipe={(e) => handleChangeRecipe(e)}\n      />\n\n      <hr />\n      <RecipeFormSection\n        sectionName=\"Flour\"\n        recipe={recipe}\n        ingredients={flours}\n        ingredientType=\"flour\"\n        handleClickAddIngredient={(e, ingredientType) =>\n          handleClickAddIngredient(e, ingredientType)\n        }\n        handleChangeIngredient={(e, ingredientType) =>\n          handleChangeIngredient(e, ingredientType)\n        }\n        handleSubtractClick={(e, id, ingredientType) =>\n          handleSubtractClick(e, id, ingredientType)\n        }\n      />\n      <RecipeFormSection\n        sectionName=\"Ingredients\"\n        recipe={recipe}\n        ingredients={ingredients}\n        ingredientType=\"ingredient\"\n        handleClickAddIngredient={(e, ingredientType) =>\n          handleClickAddIngredient(e, ingredientType)\n        }\n        handleChangeIngredient={(e, ingredientType) =>\n          handleChangeIngredient(e, ingredientType)\n        }\n        handleSubtractClick={(e, id, ingredientType) =>\n          handleSubtractClick(e, id, ingredientType)\n        }\n      />\n    </form>\n  );\n}\n\nexport default RecipeForm;\n"]},"metadata":{},"sourceType":"module"}