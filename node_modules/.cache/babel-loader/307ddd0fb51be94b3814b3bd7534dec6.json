{"ast":null,"code":"import _objectSpread from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Modal from\"../../Modal/Modal\";import{API_SAVE}from\"../../Utilities/APImethods/API_SAVE\";import{useHistory}from\"react-router-dom\";// import { GET_ALL_ERROR_MESSAGES } from \"../../ValidateForm/GET_ALL_ERROR_MESSAGES\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FormSaveButton(props){var history=useHistory();var _API_SAVE=API_SAVE(props.formData,props.endpointSuffix,props.rowId),_API_SAVE2=_slicedToArray(_API_SAVE,2),resSave=_API_SAVE2[0],saveData=_API_SAVE2[1];var _useState=useState({display:false}),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];useEffect(function(){if(resSave.saveSuccessful)return setModal({display:true,type:\"notification\",text:\"Save successful.\",redirect:true,redirectSuffix:props.redirectSuffix});if(resSave.saveError.length>0){return setModal({display:true,type:\"notification\",text:\"Failed to save.\",redirect:false,redirectSuffix:\"\"});}},[resSave,props.redirectSuffix]);var hideModal=function hideModal(e){e.preventDefault();setModal(_objectSpread(_objectSpread({},modal),{},{display:false}));if(modal.redirect)history.push(\"/\".concat(props.redirectSuffix));};var renderModal=function renderModal(){return/*#__PURE__*/_jsx(Modal,{type:modal.type,text:modal.text,redirect:modal.redirect,handleModalClose:function handleModalClose(e){return hideModal(e);}});};var handleSave=function handleSave(e){e.preventDefault();validateForm();};var validateForm=function validateForm(){// const formErrorsObj = GET_ALL_ERROR_MESSAGES(\n//   props.formName,\n//   props.formData\n// );\n// props.setFormError(formErrorsObj);\n// for (const property in formErrorsObj) {\n//   let formErrorMessage = formErrorsObj[property];\n//   if (formErrorMessage.length > 0) return;\n// }\nsaveData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"save-button\",children:[modal.display?renderModal():null,/*#__PURE__*/_jsx(\"button\",{id:\"button-save\",className:\"button-save-delete button-save-delete_save\",type:\"submit\",value:\"Save\",onClick:handleSave,children:\"Save\"})]});}export default FormSaveButton;","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/CommonFormComponents/FormSaveButton/FormSaveButton.js"],"names":["React","useEffect","useState","Modal","API_SAVE","useHistory","FormSaveButton","props","history","formData","endpointSuffix","rowId","resSave","saveData","display","modal","setModal","saveSuccessful","type","text","redirect","redirectSuffix","saveError","length","hideModal","e","preventDefault","push","renderModal","handleSave","validateForm"],"mappings":"2TAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,OAASC,QAAT,KAAyB,qCAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA;wFAEA,QAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,CAC7B,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CAD6B,cAEDD,QAAQ,CAClCG,KAAK,CAACE,QAD4B,CAElCF,KAAK,CAACG,cAF4B,CAGlCH,KAAK,CAACI,KAH4B,CAFP,wCAEtBC,OAFsB,eAEbC,QAFa,6BAQHX,QAAQ,CAAC,CACjCY,OAAO,CAAE,KADwB,CAAD,CARL,wCAQtBC,KARsB,eAQfC,QARe,eAY7Bf,SAAS,CAAC,UAAM,CACd,GAAIW,OAAO,CAACK,cAAZ,CACE,MAAOD,CAAAA,QAAQ,CAAC,CACdF,OAAO,CAAE,IADK,CAEdI,IAAI,CAAE,cAFQ,CAGdC,IAAI,CAAE,kBAHQ,CAIdC,QAAQ,CAAE,IAJI,CAKdC,cAAc,CAAEd,KAAK,CAACc,cALR,CAAD,CAAf,CAQF,GAAIT,OAAO,CAACU,SAAR,CAAkBC,MAAlB,CAA2B,CAA/B,CAAkC,CAChC,MAAOP,CAAAA,QAAQ,CAAC,CACdF,OAAO,CAAE,IADK,CAEdI,IAAI,CAAE,cAFQ,CAGdC,IAAI,CAAE,iBAHQ,CAIdC,QAAQ,CAAE,KAJI,CAKdC,cAAc,CAAE,EALF,CAAD,CAAf,CAOD,CACF,CAnBQ,CAmBN,CAACT,OAAD,CAAUL,KAAK,CAACc,cAAhB,CAnBM,CAAT,CAqBA,GAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,CAAD,CAAO,CACvBA,CAAC,CAACC,cAAF,GACAV,QAAQ,gCAAMD,KAAN,MAAaD,OAAO,CAAE,KAAtB,GAAR,CACA,GAAIC,KAAK,CAACK,QAAV,CAAoBZ,OAAO,CAACmB,IAAR,YAAiBpB,KAAK,CAACc,cAAvB,GACrB,CAJD,CAMA,GAAMO,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,mBACE,KAAC,KAAD,EACE,IAAI,CAAEb,KAAK,CAACG,IADd,CAEE,IAAI,CAAEH,KAAK,CAACI,IAFd,CAGE,QAAQ,CAAEJ,KAAK,CAACK,QAHlB,CAIE,gBAAgB,CAAE,0BAACK,CAAD,QAAOD,CAAAA,SAAS,CAACC,CAAD,CAAhB,EAJpB,EADF,CAQD,CATD,CAWA,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACJ,CAAD,CAAO,CACxBA,CAAC,CAACC,cAAF,GACAI,YAAY,GACb,CAHD,CAKA,GAAMA,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACAjB,QAAQ,GACT,CAZD,CAcA,mBACE,aAAK,SAAS,CAAC,aAAf,WACGE,KAAK,CAACD,OAAN,CAAgBc,WAAW,EAA3B,CAAgC,IADnC,cAEE,eACE,EAAE,CAAC,aADL,CAEE,SAAS,CAAC,4CAFZ,CAGE,IAAI,CAAC,QAHP,CAIE,KAAK,CAAC,MAJR,CAKE,OAAO,CAAEC,UALX,kBAFF,GADF,CAcD,CAED,cAAevB,CAAAA,cAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Modal from \"../../Modal/Modal\";\nimport { API_SAVE } from \"../../Utilities/APImethods/API_SAVE\";\nimport { useHistory } from \"react-router-dom\";\n// import { GET_ALL_ERROR_MESSAGES } from \"../../ValidateForm/GET_ALL_ERROR_MESSAGES\";\n\nfunction FormSaveButton(props) {\n  const history = useHistory();\n  const [resSave, saveData] = API_SAVE(\n    props.formData,\n    props.endpointSuffix,\n    props.rowId\n  );\n\n  const [modal, setModal] = useState({\n    display: false,\n  });\n\n  useEffect(() => {\n    if (resSave.saveSuccessful)\n      return setModal({\n        display: true,\n        type: \"notification\",\n        text: \"Save successful.\",\n        redirect: true,\n        redirectSuffix: props.redirectSuffix,\n      });\n\n    if (resSave.saveError.length > 0) {\n      return setModal({\n        display: true,\n        type: \"notification\",\n        text: \"Failed to save.\",\n        redirect: false,\n        redirectSuffix: \"\",\n      });\n    }\n  }, [resSave, props.redirectSuffix]);\n\n  const hideModal = (e) => {\n    e.preventDefault();\n    setModal({ ...modal, display: false });\n    if (modal.redirect) history.push(`/${props.redirectSuffix}`);\n  };\n\n  const renderModal = () => {\n    return (\n      <Modal\n        type={modal.type}\n        text={modal.text}\n        redirect={modal.redirect}\n        handleModalClose={(e) => hideModal(e)}\n      />\n    );\n  };\n\n  const handleSave = (e) => {\n    e.preventDefault();\n    validateForm();\n  };\n\n  const validateForm = () => {\n    // const formErrorsObj = GET_ALL_ERROR_MESSAGES(\n    //   props.formName,\n    //   props.formData\n    // );\n\n    // props.setFormError(formErrorsObj);\n    // for (const property in formErrorsObj) {\n    //   let formErrorMessage = formErrorsObj[property];\n    //   if (formErrorMessage.length > 0) return;\n    // }\n    saveData();\n  };\n\n  return (\n    <div className=\"save-button\">\n      {modal.display ? renderModal() : null}\n      <button\n        id=\"button-save\"\n        className=\"button-save-delete button-save-delete_save\"\n        type=\"submit\"\n        value=\"Save\"\n        onClick={handleSave}\n      >\n        Save\n      </button>\n    </div>\n  );\n}\n\nexport default FormSaveButton;\n"]},"metadata":{},"sourceType":"module"}