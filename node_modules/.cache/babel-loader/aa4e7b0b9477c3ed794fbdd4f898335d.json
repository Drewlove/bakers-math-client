{"ast":null,"code":"import _toConsumableArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import RecipeFormHeader from\"../RecipeFormHeader/RecipeFormHeader\";import RecipeFormSection from\"../RecipeFormSection/RecipeFormSection\";import FormSaveButton from\"../../CommonFormComponents/FormSaveButton/FormSaveButton\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RecipeForm(props){var _useState=useState({recipe_name:\"\",flour_total:\"\"}),_useState2=_slicedToArray(_useState,2),recipe=_useState2[0],setRecipe=_useState2[1];var _useState3=useState([{name:\"\",percent:\"\",id:\"\"}]),_useState4=_slicedToArray(_useState3,2),flours=_useState4[0],setFlours=_useState4[1];var _useState5=useState([{name:\"\",percent:\"\",id:\"\"}]),_useState6=_slicedToArray(_useState5,2),ingredients=_useState6[0],setIngredients=_useState6[1];var _useParams=useParams(),recipeId=_useParams.recipeId;useEffect(function(){if(recipeId!==\"new\"){var _recipe=props.data[0];var _flours=_recipe.flours,_ingredients=_recipe.ingredients;setFlours(_flours);setIngredients(_ingredients);setRecipe({recipe_name:_recipe.recipe_name,flour_total:_recipe.flour_total});}else{setFlours([{name:\"\",percent:\"\",id:generateStringId()}]);setIngredients([{name:\"\",percent:\"\",id:generateStringId()}]);setRecipe({recipe_name:\"\",flour_total:\"\"});}},[props.data,recipeId]);var _handleChangeRecipe=function handleChangeRecipe(e){setRecipe(_objectSpread(_objectSpread({},recipe),{},_defineProperty({},e.target.name,e.target.value)));};var _handleChangeIngredient=function handleChangeIngredient(e,ingredientType){var nameArr=e.target.name.split(\"-\");var propertyName=nameArr[0];var id=nameArr[1];if(ingredientType===\"flour\")updateFlour(e,propertyName,id);else if(ingredientType===\"ingredient\")updateIngredient(e,propertyName,id);};var updateIngredient=function updateIngredient(e,propertyName,id){setIngredients(ingredients.map(function(key){return key.id===id?_objectSpread(_objectSpread({},key),{},_defineProperty({},propertyName,e.target.value)):key;}));};var updateFlour=function updateFlour(e,propertyName,id){setFlours(flours.map(function(key){return key.id===id?_objectSpread(_objectSpread({},key),{},_defineProperty({},propertyName,e.target.value)):key;}));};var _handleSubtractClick=function handleSubtractClick(e,id,ingredientType){e.preventDefault();if(ingredientType===\"flour\")setFlours(flours.filter(function(key){return key.id!==id;}));else if(ingredientType===\"ingredient\")setIngredients(ingredients.filter(function(key){return key.id!==id;}));};var _handleClickAddIngredient=function handleClickAddIngredient(e,ingredientType){e.preventDefault();if(ingredientType===\"flour\")setFlours([].concat(_toConsumableArray(flours),[{name:\"\",percent:\"\",id:generateStringId()}]));else if(ingredientType===\"ingredient\")setIngredients([].concat(_toConsumableArray(ingredients),[{name:\"\",percent:\"\",id:generateStringId()}]));};var generateStringId=function generateStringId(){return Date.now().toString();};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(RecipeFormHeader,{recipe:recipe,handleChangeRecipe:function handleChangeRecipe(e){return _handleChangeRecipe(e);}}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(RecipeFormSection,{sectionName:\"Flour\",recipe:recipe,ingredients:flours,ingredientType:\"flour\",handleClickAddIngredient:function handleClickAddIngredient(e,ingredientType){return _handleClickAddIngredient(e,ingredientType);},handleChangeIngredient:function handleChangeIngredient(e,ingredientType){return _handleChangeIngredient(e,ingredientType);},handleSubtractClick:function handleSubtractClick(e,id,ingredientType){return _handleSubtractClick(e,id,ingredientType);}}),/*#__PURE__*/_jsx(RecipeFormSection,{sectionName:\"Ingredients\",recipe:recipe,ingredients:ingredients,ingredientType:\"ingredient\",handleClickAddIngredient:function handleClickAddIngredient(e,ingredientType){return _handleClickAddIngredient(e,ingredientType);},handleChangeIngredient:function handleChangeIngredient(e,ingredientType){return _handleChangeIngredient(e,ingredientType);},handleSubtractClick:function handleSubtractClick(e,id,ingredientType){return _handleSubtractClick(e,id,ingredientType);}}),/*#__PURE__*/_jsx(FormSaveButton,{formData:{recipe_name:recipe.recipe_name,flour_total:recipe.flour_total,flours:flours,ingredients:ingredients},formName:\"recipe\",endpointSuffix:\"recipes\",redirectSuffix:\"/\",rowId:recipeId// setFormError={setFormError}\n})]});}export default RecipeForm;","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/RecipeForm/RecipeForm/RecipeForm.js"],"names":["useEffect","useState","RecipeFormHeader","RecipeFormSection","FormSaveButton","useParams","RecipeForm","props","recipe_name","flour_total","recipe","setRecipe","name","percent","id","flours","setFlours","ingredients","setIngredients","recipeId","data","generateStringId","handleChangeRecipe","e","target","value","handleChangeIngredient","ingredientType","nameArr","split","propertyName","updateFlour","updateIngredient","map","key","handleSubtractClick","preventDefault","filter","handleClickAddIngredient","Date","now","toString"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport RecipeFormHeader from \"../RecipeFormHeader/RecipeFormHeader\";\nimport RecipeFormSection from \"../RecipeFormSection/RecipeFormSection\";\nimport FormSaveButton from \"../../CommonFormComponents/FormSaveButton/FormSaveButton\";\nimport { useParams } from \"react-router-dom\";\n\nfunction RecipeForm(props) {\n  const [recipe, setRecipe] = useState({\n    recipe_name: \"\",\n    flour_total: \"\",\n  });\n\n  const [flours, setFlours] = useState([{ name: \"\", percent: \"\", id: \"\" }]);\n  const [ingredients, setIngredients] = useState([\n    { name: \"\", percent: \"\", id: \"\" },\n  ]);\n\n  const { recipeId } = useParams();\n\n  useEffect(() => {\n    if (recipeId !== \"new\") {\n      const recipe = props.data[0];\n      const { flours, ingredients } = recipe;\n      setFlours(flours);\n      setIngredients(ingredients);\n      setRecipe({\n        recipe_name: recipe.recipe_name,\n        flour_total: recipe.flour_total,\n      });\n    } else {\n      setFlours([{ name: \"\", percent: \"\", id: generateStringId() }]);\n      setIngredients([{ name: \"\", percent: \"\", id: generateStringId() }]);\n      setRecipe({ recipe_name: \"\", flour_total: \"\" });\n    }\n  }, [props.data, recipeId]);\n\n  const handleChangeRecipe = (e) => {\n    setRecipe({ ...recipe, [e.target.name]: e.target.value });\n  };\n\n  const handleChangeIngredient = (e, ingredientType) => {\n    let nameArr = e.target.name.split(\"-\");\n    const propertyName = nameArr[0];\n    const id = nameArr[1];\n    if (ingredientType === \"flour\") updateFlour(e, propertyName, id);\n    else if (ingredientType === \"ingredient\")\n      updateIngredient(e, propertyName, id);\n  };\n\n  const updateIngredient = (e, propertyName, id) => {\n    setIngredients(\n      ingredients.map((key) => {\n        return key.id === id ? { ...key, [propertyName]: e.target.value } : key;\n      })\n    );\n  };\n\n  const updateFlour = (e, propertyName, id) => {\n    setFlours(\n      flours.map((key) => {\n        return key.id === id ? { ...key, [propertyName]: e.target.value } : key;\n      })\n    );\n  };\n\n  const handleSubtractClick = (e, id, ingredientType) => {\n    e.preventDefault();\n    if (ingredientType === \"flour\")\n      setFlours(flours.filter((key) => key.id !== id));\n    else if (ingredientType === \"ingredient\")\n      setIngredients(ingredients.filter((key) => key.id !== id));\n  };\n\n  const handleClickAddIngredient = (e, ingredientType) => {\n    e.preventDefault();\n    if (ingredientType === \"flour\")\n      setFlours([...flours, { name: \"\", percent: \"\", id: generateStringId() }]);\n    else if (ingredientType === \"ingredient\")\n      setIngredients([\n        ...ingredients,\n        { name: \"\", percent: \"\", id: generateStringId() },\n      ]);\n  };\n\n  const generateStringId = () => {\n    return Date.now().toString();\n  };\n\n  return (\n    <form>\n      <RecipeFormHeader\n        recipe={recipe}\n        handleChangeRecipe={(e) => handleChangeRecipe(e)}\n      />\n\n      <hr />\n      <RecipeFormSection\n        sectionName=\"Flour\"\n        recipe={recipe}\n        ingredients={flours}\n        ingredientType=\"flour\"\n        handleClickAddIngredient={(e, ingredientType) =>\n          handleClickAddIngredient(e, ingredientType)\n        }\n        handleChangeIngredient={(e, ingredientType) =>\n          handleChangeIngredient(e, ingredientType)\n        }\n        handleSubtractClick={(e, id, ingredientType) =>\n          handleSubtractClick(e, id, ingredientType)\n        }\n      />\n      <RecipeFormSection\n        sectionName=\"Ingredients\"\n        recipe={recipe}\n        ingredients={ingredients}\n        ingredientType=\"ingredient\"\n        handleClickAddIngredient={(e, ingredientType) =>\n          handleClickAddIngredient(e, ingredientType)\n        }\n        handleChangeIngredient={(e, ingredientType) =>\n          handleChangeIngredient(e, ingredientType)\n        }\n        handleSubtractClick={(e, id, ingredientType) =>\n          handleSubtractClick(e, id, ingredientType)\n        }\n      />\n      <FormSaveButton\n        formData={{\n          recipe_name: recipe.recipe_name,\n          flour_total: recipe.flour_total,\n          flours: flours,\n          ingredients: ingredients,\n        }}\n        formName=\"recipe\"\n        endpointSuffix=\"recipes\"\n        redirectSuffix=\"/\"\n        rowId={recipeId}\n        // setFormError={setFormError}\n      />\n    </form>\n  );\n}\n\nexport default RecipeForm;\n"]},"metadata":{},"sourceType":"module"}