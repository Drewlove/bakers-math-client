{"ast":null,"code":"var _jsxFileName = \"/Users/Drew/Projects/bakers-math-client/src/CommonFormComponents/FormSaveButton/FormSaveButton.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Modal from \"../../Modal/Modal\";\nimport { API_SAVE } from \"../../Utilities/APImethods/API_SAVE\"; // import { useHistory } from \"react-router-dom\";\n// import { GET_ALL_ERROR_MESSAGES } from \"../../ValidateForm/GET_ALL_ERROR_MESSAGES\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction FormSaveButton(props) {\n  _s();\n\n  const history = useHistory();\n  const [resSave, saveData] = API_SAVE(props.formData, props.endpointSuffix, props.recipeId);\n  const [modal, setModal] = useState({\n    display: false\n  });\n  useEffect(() => {\n    if (resSave.saveSuccessful) return setModal({\n      display: true,\n      type: \"notification\",\n      text: \"Save successful.\",\n      redirect: true,\n      redirectSuffix: props.redirectSuffix\n    });\n\n    if (resSave.saveError.length > 0) {\n      return setModal({\n        display: true,\n        type: \"notification\",\n        text: \"Failed to save.\",\n        redirect: false,\n        redirectSuffix: \"\"\n      });\n    }\n  }, [resSave, props.redirectSuffix]);\n\n  const hideModal = e => {\n    e.preventDefault();\n    setModal({ ...modal,\n      display: false\n    });\n    if (modal.redirect) history.push(`/${props.redirectSuffix}`);\n  };\n\n  const renderModal = () => {\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      type: modal.type,\n      text: modal.text,\n      redirect: modal.redirect,\n      handleModalClose: e => hideModal(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  };\n\n  const handleSave = e => {\n    e.preventDefault();\n    validateForm();\n  };\n\n  const validateForm = () => {\n    const formErrorsObj = GET_ALL_ERROR_MESSAGES(props.formName, props.formData);\n    props.setFormError(formErrorsObj);\n\n    for (const property in formErrorsObj) {\n      let formErrorMessage = formErrorsObj[property];\n      if (formErrorMessage.length > 0) return;\n    }\n\n    saveData();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"save-button-section\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"button-save\",\n      className: \"button save-button-section__button\",\n      type: \"submit\",\n      value: \"Save\",\n      onClick: handleSave,\n      children: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FormSaveButton, \"UKB0l+ua/UYhCe5y/Ybfk8RJ6bc=\", true);\n\n_c = FormSaveButton;\nexport default FormSaveButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormSaveButton\");","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/CommonFormComponents/FormSaveButton/FormSaveButton.js"],"names":["React","useEffect","useState","Modal","API_SAVE","FormSaveButton","props","history","useHistory","resSave","saveData","formData","endpointSuffix","recipeId","modal","setModal","display","saveSuccessful","type","text","redirect","redirectSuffix","saveError","length","hideModal","e","preventDefault","push","renderModal","handleSave","validateForm","formErrorsObj","GET_ALL_ERROR_MESSAGES","formName","setFormError","property","formErrorMessage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Modal from \"../../Modal/Modal\";\nimport { API_SAVE } from \"../../Utilities/APImethods/API_SAVE\";\n// import { useHistory } from \"react-router-dom\";\n// import { GET_ALL_ERROR_MESSAGES } from \"../../ValidateForm/GET_ALL_ERROR_MESSAGES\";\n\nfunction FormSaveButton(props) {\n  const history = useHistory();\n  const [resSave, saveData] = API_SAVE(\n    props.formData,\n    props.endpointSuffix,\n    props.recipeId\n  );\n\n  const [modal, setModal] = useState({\n    display: false,\n  });\n\n  useEffect(() => {\n    if (resSave.saveSuccessful)\n      return setModal({\n        display: true,\n        type: \"notification\",\n        text: \"Save successful.\",\n        redirect: true,\n        redirectSuffix: props.redirectSuffix,\n      });\n\n    if (resSave.saveError.length > 0) {\n      return setModal({\n        display: true,\n        type: \"notification\",\n        text: \"Failed to save.\",\n        redirect: false,\n        redirectSuffix: \"\",\n      });\n    }\n  }, [resSave, props.redirectSuffix]);\n\n  const hideModal = (e) => {\n    e.preventDefault();\n    setModal({ ...modal, display: false });\n    if (modal.redirect) history.push(`/${props.redirectSuffix}`);\n  };\n\n  const renderModal = () => {\n    return (\n      <Modal\n        type={modal.type}\n        text={modal.text}\n        redirect={modal.redirect}\n        handleModalClose={(e) => hideModal(e)}\n      />\n    );\n  };\n\n  const handleSave = (e) => {\n    e.preventDefault();\n    validateForm();\n  };\n\n  const validateForm = () => {\n    const formErrorsObj = GET_ALL_ERROR_MESSAGES(\n      props.formName,\n      props.formData\n    );\n\n    props.setFormError(formErrorsObj);\n    for (const property in formErrorsObj) {\n      let formErrorMessage = formErrorsObj[property];\n      if (formErrorMessage.length > 0) return;\n    }\n    saveData();\n  };\n\n  return (\n    <section className=\"save-button-section\">\n      {/* {modal.display ? renderModal() : null} */}\n      <button\n        id=\"button-save\"\n        className=\"button save-button-section__button\"\n        type=\"submit\"\n        value=\"Save\"\n        onClick={handleSave}\n      >\n        Save\n      </button>\n    </section>\n  );\n}\n\nexport default FormSaveButton;\n"]},"metadata":{},"sourceType":"module"}