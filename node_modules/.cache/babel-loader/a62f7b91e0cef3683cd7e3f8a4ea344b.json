{"ast":null,"code":"import _objectSpread from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Drew/Projects/bakers-math-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{API_DELETE}from\"../../Utilities/APImethods/API_DELETE\";import Modal from\"../../Modal/Modal\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FormDeleteButton(props){var history=useHistory();var _API_DELETE=API_DELETE(props.endpointSuffix,props.recipeId),_API_DELETE2=_slicedToArray(_API_DELETE,2),resDelete=_API_DELETE2[0],deleteData=_API_DELETE2[1];var _useState=useState({display:false,text:\"\",type:\"\",redirect:false,redirectSuffix:\"\"}),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];useEffect(function(){var modalDeleteSuccessful={display:true,type:\"notification\",redirect:true,text:\"Record deleted\",redirectSuffix:props.redirectSuffix};var modalDeleteFail={display:true,type:\"notification\",redirect:false,text:resDelete.deleteErrorMessage,redirectSuffix:\"\"};if(resDelete.recordDeleted===true){setModal(modalDeleteSuccessful);}else if(resDelete.isDeleteError===true){setModal(modalDeleteFail);}},[resDelete,props.redirectSuffix]);var handleDeleteClick=function handleDeleteClick(e){e.preventDefault();setModal(_objectSpread(_objectSpread({},modal),{},{display:true,type:\"confirmation\",text:\"Delete this record?\"}));};var renderModal=function renderModal(){return modal.type===\"notification\"?renderModalNotification():renderModalConfirmation();};var renderModalNotification=function renderModalNotification(){return/*#__PURE__*/_jsx(Modal,{text:modal.text,handleModalClose:function handleModalClose(e){return _handleModalClose(e);}});};var renderModalConfirmation=function renderModalConfirmation(){return/*#__PURE__*/_jsx(Modal,{text:modal.text,type:modal.type,handleModalClose:function handleModalClose(e){return _handleModalClose(e);},handleModalConfirm:function handleModalConfirm(e){return deleteItem(e);},confirmAction:\"Delete\"});};var _handleModalClose=function _handleModalClose(e){e.preventDefault();setModal(_objectSpread(_objectSpread({},modal),{},{display:false}));return modal.redirect===true?history.push(\"/\".concat(props.redirectSuffix)):null;};var deleteItem=function deleteItem(e){e.preventDefault();deleteData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"delete-button\",children:[modal.display===true?renderModal():null,/*#__PURE__*/_jsx(\"button\",{id:\"button-delete\",className:\"button-save-delete button-save-delete_delete\",value:\"delete\",onClick:handleDeleteClick,children:\"Delete\"})]});}export default FormDeleteButton;","map":{"version":3,"sources":["/Users/Drew/Projects/bakers-math-client/src/CommonFormComponents/FormDeleteButton/FormDeleteButton.js"],"names":["React","useState","useEffect","API_DELETE","Modal","useHistory","FormDeleteButton","props","history","endpointSuffix","recipeId","resDelete","deleteData","display","text","type","redirect","redirectSuffix","modal","setModal","modalDeleteSuccessful","modalDeleteFail","deleteErrorMessage","recordDeleted","isDeleteError","handleDeleteClick","e","preventDefault","renderModal","renderModalNotification","renderModalConfirmation","handleModalClose","deleteItem","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { API_DELETE } from \"../../Utilities/APImethods/API_DELETE\";\nimport Modal from \"../../Modal/Modal\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction FormDeleteButton(props) {\n  const history = useHistory();\n\n  const [resDelete, deleteData] = API_DELETE(\n    props.endpointSuffix,\n    props.recipeId\n  );\n\n  const [modal, setModal] = useState({\n    display: false,\n    text: \"\",\n    type: \"\",\n    redirect: false,\n    redirectSuffix: \"\",\n  });\n\n  useEffect(() => {\n    const modalDeleteSuccessful = {\n      display: true,\n      type: \"notification\",\n      redirect: true,\n      text: \"Record deleted\",\n      redirectSuffix: props.redirectSuffix,\n    };\n    const modalDeleteFail = {\n      display: true,\n      type: \"notification\",\n      redirect: false,\n      text: resDelete.deleteErrorMessage,\n      redirectSuffix: \"\",\n    };\n\n    if (resDelete.recordDeleted === true) {\n      setModal(modalDeleteSuccessful);\n    } else if (resDelete.isDeleteError === true) {\n      setModal(modalDeleteFail);\n    }\n  }, [resDelete, props.redirectSuffix]);\n\n  const handleDeleteClick = (e) => {\n    e.preventDefault();\n    setModal({\n      ...modal,\n      display: true,\n      type: \"confirmation\",\n      text: \"Delete this record?\",\n    });\n  };\n\n  const renderModal = () => {\n    return modal.type === \"notification\"\n      ? renderModalNotification()\n      : renderModalConfirmation();\n  };\n\n  const renderModalNotification = () => {\n    return (\n      <Modal text={modal.text} handleModalClose={(e) => handleModalClose(e)} />\n    );\n  };\n\n  const renderModalConfirmation = () => {\n    return (\n      <Modal\n        text={modal.text}\n        type={modal.type}\n        handleModalClose={(e) => handleModalClose(e)}\n        handleModalConfirm={(e) => deleteItem(e)}\n        confirmAction=\"Delete\"\n      />\n    );\n  };\n\n  const handleModalClose = (e) => {\n    e.preventDefault();\n    setModal({ ...modal, display: false });\n    return modal.redirect === true\n      ? history.push(`/${props.redirectSuffix}`)\n      : null;\n  };\n\n  const deleteItem = (e) => {\n    e.preventDefault();\n    deleteData();\n  };\n\n  return (\n    <div className=\"delete-button\">\n      {modal.display === true ? renderModal() : null}\n      <button\n        id=\"button-delete\"\n        className=\"button-save-delete button-save-delete_delete\"\n        value=\"delete\"\n        onClick={handleDeleteClick}\n      >\n        Delete\n      </button>\n    </div>\n  );\n}\n\nexport default FormDeleteButton;\n"]},"metadata":{},"sourceType":"module"}